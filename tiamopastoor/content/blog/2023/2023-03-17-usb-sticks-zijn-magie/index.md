---
title: USB-sticks zijn magie
author: tiamopastoor
date: 2023-03-17T15:00:00+00:00
language: nl
categories:
  - Miscellaneous

---
Ik ben nu bezig met een kinderboek waarin de hoofdpersoon vast komt te zitten in de wereld van computers. Ik doe veel met computers (spellen, websites, programmeren) en met schrijven, dus dat leek me een perfect project om dat te combineren.

In dat boek probeer ik gaandeweg uit te leggen hoe zo'n computer werkt. (Op een leuke en avontuurlijke manier, het moet nooit voelen als een schoolboek natuurlijk.)

En zo kwamen we bij hoofdstuk 19. Het moment dat ik wilde uitleggen hoe _flash memory_ werkte: het type geheugen dat smartphones en USB-sticks gebruiken.

Ik had een _vaag_ idee hoe dit in elkaar stak. De USB heeft miljoenen kleine cellen die een 0 of een 1 kunnen zijn. Als je hem in de computer steekt, gebruikt de computer elektriciteit om de staat van deze cellen te kunnen _veranderen_.

Op zich is dat waar. Maar de details bleken ... eh ... **quantumfysica.**

Ik heb even een nachtje moeten slapen voordat ik toch besloot om dit toe te voegen aan dit kinderboek :p Want dit is hoe het werkt.

Het idee van quantumfysica is dat, als je iets maar _klein genoeg maakt_, alle normale regels van onze wereld niet meer gelden.

Eén van die regels is dat dingen niet kunnen teleporteren. Wij zijn op één plek. En om op een andere plek te komen, moeten we daar in een continue lijn naartoe bewegen.

Particles---zoals _elektronen_---hoeven dat dus niet. Zij begeven zich niet op één punt, maar in een _cloud_. Op elk moment kunnen ze, met een bepaalde kans, op een plek in die omgeving zijn. En daar hoeven ze dus niet naartoe te bewegen: ze teleporteren erheen. (De functie die aangeeft wat die kansen precies zijn, heet de _wave function_.)

{{% remark %}}
Veel mensen zijn opgegroeid met het idee dat atomen bestaan uit protonen en neutronen (in de kern), waaromheen elektronen cirkelen. Vaak noemden docenten dit ringen of lagen. Maar dat is dus niet zo: het is geen carnavalsoptocht waarin de elektronen rondjes draaien om de kern. De elektronen teleporteren simpelweg binnen een bepaalde afstand van die atoomkern. Dat is hun _cloud_.
{{% /remark %}}

Stel nu dat we een muur plaatsen. In onze echte wereld kunnen we daar niet zomaar langs. Immers moeten we _door die muur heen_, en wij kunnen niet dwars door steen.

Maar voor elektronen is dit wat minder een probleem. Zij hebben een bepaalde kans om---hopsakidee---ineens aan de andere kant van de muur te staan! 

Normaal gesproken is deze kans klein. Maar verander de omstandigheden, en je verhoogt de kans tot het punt dat je _vrij zeker_ bent dat de elektron aan de andere kant van de muur zal verschijnen.

Haal die omstandigheden weer weg en _ta da_! Je hebt een elektron opgesloten aan de andere kant van de barrière.

Dit heet **quantum tunneling** en is hoe USB-sticks (en SSDs, en SD-kaarten, en telefoons) werken.

  * Je geheugen is een gigantisch grid van cellen die een 0 of een 1 zijn.
  * Om deze te _veranderen_, gebruiken we _quantumfysica_ om elektronen op magische wijze langs een muur te teleporteren.
  * Maar daarna zitten ze vast, waardoor je _geheugen bewaard blijft_.

Zo, dat heb ik geleerd. En nu mag ik dit in verhaalvorm langzaam duidelijk maken aan jonge lezers. Enerzijds een uitdaging, anderzijds een uitkomst. Want ik wist nog niet precies hoe ik de climax ging schrijven, maar nu ik dit weet ... denk ik dat mijn hoofdpersonage plotseling ontdekt hoe ze kunnen teleporteren :p

Dit verhaal heeft nog wat kanttekeningen.

Ten eerste: inmiddels is de technologie zo ver dat we elke cel _meerdere waardes_ kunnen geven. Dat is hoeveel controle we hebben. Dus elke cel kan waardes 0 tot 7 opslaan inmiddels.

Ten tweede: dit is waarom SSDs een maximum hebben aan hoeveel ze kunnen worden gebruikt. Men kan alleen data veranderen door eerst de originele data (op die plek) leeg te halen. Want dat zijn de enige twee dingen die we (goed) kunnen:

  * Zet de cel naar _een waarde_
  * Reset de cel naar _geen waarde_

Oftewel, een cel moet eerst worden gewist, voordat het nieuwe waardes kan opslaan.

Dat wissen en elektrongegoochel verslijt langzaam het mechanisme. Er komt een moment waarop je alleen nog kan _lezen_ wat erop staat, maar niks meer kan _veranderen_. 

Ten derde: en _dat_ is de reden dat flash drives een chip hebben die heel slim kiest hoe het alles opslaat. Het verdeelt alle data precies over alle cellen, zodat ze allemaal ongeveer even veel worden gebruikt ("wear levelling") Dat is waarom dit geheugen steeds langer meegaat de laatste jaren. Er zijn hele slimme manieren gevonden om dit nadeel van flash memory---het kapotgaan van cellen---zoveel mogelijk te reduceren. 

Maar als je flash geheugen ermee ophoudt, kan je dus vrij zeker zijn dat het ook echt definitief gedaan is, en alle cellen opgebruikt.